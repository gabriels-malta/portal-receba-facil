@model RecebaFacil.Portal.Models.Encomenda.NovaEncomendaViewModel

<div class="modal fade" id="modalNovaEncomenda" tabindex="-1" role="dialog" aria-labelledby="modalNovaEncomendaTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalNovaEncomendaTitle">Cadastrar nova encomenda</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form asp-route="Encomenda_CadastrarNova" asp-antiforgery="true"
                      data-ajax="true"
                      data-ajax-method="post"
                      data-ajax-mode="replace"
                      data-ajax-update="#modalNovaEncomenda"
                      data-ajax-success="successNovaEncomenda"
                      data-ajax-failure="errorNovaEncomenda">
                    <div asp-validation-summary="ModelOnly"></div>

                    <div class="form-group">
                        <label asp-for="PontoRetiradaId">Ponto de Retirada</label>
                        <select asp-for="PontoRetiradaId" asp-items="Model.ListaPontoRetirada" class="form-control">
                            <option value=""></option>
                        </select>
                        <span asp-validation-for="PontoRetiradaId"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="DataPedido">Data do Pedido</label>
                        <input type="text" asp-for="DataPedido" class="form-control" />
                        <span asp-validation-for="DataPedido"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="NumeroPedido">Número do Pedido</label>
                        <input type="text" asp-for="NumeroPedido" class="form-control" />
                        <span asp-validation-for="NumeroPedido"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="NotaFiscal">Nota Fiscal</label>
                        <input type="text" asp-for="NotaFiscal" class="form-control" />
                        <span asp-validation-for="NotaFiscal"></span>
                    </div>

                    <button class="btn btn-primary">Salvar</button>
                </form>
            </div>
            <div class="modal-footer">
                <div id="onerror" class="d-none alert-danger"><p class="text-danger">Algo deu errado. Tente novamente mais tarde.</p></div>
            </div>
        </div>
    </div>
</div>
<script>
    $(function () {
        function successNovaEncomenda(reponse) {
            $("#modalNovaEncomenda").modal("close");
            $("#modalNovaEncomenda").modal("dispose");
            window.location.reload();
        }

        function errorNovaEncomenda() { $("#onerror").removeClass("d-none"); }
    });
</script>